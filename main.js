(()=>{"use strict";const e=document.querySelector("#citySearch"),t=document.querySelector("#searchButton"),n=document.querySelector("#togBtn"),a=document.querySelector(".display");let d="istanbul",r="metric",i="C";async function c(e){try{null==e&&(e="istanbul");let t=await fetch(`https://api.openweathermap.org/data/2.5/weather?q=${e}&appid=8aefb7776bd0f4d912dc1d33b544d3d2`,{mode:"cors"});if("404"==t.status)throw Error("404");let n=await t.json(),a={};a.lon=n.coord.lon,a.lat=n.coord.lat,a.name=n.name,async function(e,t){let n=await fetch(`https://api.openweathermap.org/data/2.5/onecall?lat=${e.lat}&lon=${e.lon}&exclude=minutely,hourly,alerts&units=${t}&appid=8aefb7776bd0f4d912dc1d33b544d3d2`,{mode:"cors"});!function(e,t){let n={};n.name=t,n.current={},n.current.temp=e.current.temp,n.current.feelsLike=e.current.feels_like,n.current.humidity=e.current.humidity,n.current.icon=e.current.weather[0].icon,n.current.weather=e.current.weather[0].main,n.current.description=e.current.weather[0].description,n.daily=[],e.daily.forEach(((e,t)=>{if(0==t||7==t)return;let a={};var d;a.dt=(d=e.dt,["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"][new Date(1e3*d).getDay()]),a.temp=e.temp.day,a.humidity=e.humidity,a.feelsLike=e.feels_like.day,a.weather=e.weather[0].main,a.icon=e.weather[0].icon,a.description=e.weather[0].description,n.daily.push(a)})),l(n),o(n.daily)}(await n.json(),e.name)}(a,r)}catch(e){console.log("City is not found")}}function l(e){const t=document.querySelector("#cityName"),n=document.querySelector("#temperature"),a=document.querySelector("#tempImg"),d=document.querySelector("#weatherMain"),c=document.querySelector("#weatherDescription"),l=document.querySelector("#feelsLikeMain"),o=document.querySelector("#humidityMain");var u;i="metric"==r?"C":"F",t.textContent=e.name,n.textContent=e.current.temp+i,a.src=`https://openweathermap.org/img/wn/${e.current.icon}@2x.png`,d.textContent=e.current.weather,u=e.current.weather,document.querySelector(".leftSideImg").style.backgroundImage="Clear"==u?'url("img/clearSky.jpg")':"Clouds"==u?'url("img/cloudy.jpg")':"Rain"==u||"Drizzle"==u||"Thunderstorm"==u?'url("img/rainy.jpg")':"Snow"==u?'url("img/snowy.jpg")':'url("img/clearSky.jpg")',c.textContent=e.current.description,l.textContent=e.current.feelsLike+i,o.textContent=e.current.humidity+"%"}function o(e){a.innerHTML="",e.forEach((e=>{!function(e,t){let n="C";n="metric"==t?"C":"F";const a=document.querySelector(".display");let d=document.createElement("div");d.classList.add("descriptionDay");let r=document.createElement("p");r.classList.add("descriptionMain"),r.textContent=e.weather;let i=document.createElement("p");i.classList.add("descriptionDayText"),i.textContent=e.description,d.appendChild(r),d.appendChild(i);let c=document.createElement("div");c.classList.add("feelsLikeDay");let l=document.createElement("p");l.classList.add("descriptionMain"),l.textContent=e.feelsLike+n;let o=document.createElement("p");o.classList.add("feelsLikeDayText"),o.textContent="Feels Like",c.appendChild(l),c.appendChild(o);let u=document.createElement("div");u.classList.add("humidityDay");let s=document.createElement("p");s.classList.add("humidityDayMain"),s.textContent=e.humidity+"%";let m=document.createElement("p");m.classList.add("humidityDayText"),m.textContent="Humidity",u.appendChild(s),u.appendChild(m);let p=document.createElement("div");p.classList.add("bottomDay"),p.appendChild(d),p.appendChild(c),p.appendChild(u);let y=document.createElement("p");y.classList.add("tempDay"),y.textContent=e.temp+n;let h=document.createElement("img");h.classList.add("dayIcon"),h.src=`https://openweathermap.org/img/wn/${e.icon}.png`;let C=document.createElement("div");C.classList.add("topDay"),C.appendChild(y),C.appendChild(h);let g=document.createElement("p");g.classList.add("day"),g.textContent=e.dt;let w=document.createElement("div");w.classList.add("card"),w.appendChild(g),w.appendChild(C),w.appendChild(p);let f=document.createElement("div");f.classList.add("cardImg"),function(e,t){e.style.backgroundImage="Clear"==t?'url("img/clearSky.jpg")':"Clouds"==t?'url("img/cloudy.jpg")':"Rain"==t||"Drizzle"==t||"Thunderstorm"==t?'url("img/rainy.jpg")':"Snow"==t?'url("img/snowy.jpg")':'url("img/clearSky.jpg")'}(f,r.textContent),f.appendChild(w),a.appendChild(f)}(e,r)}))}n.addEventListener("change",(()=>{0==n.checked?(r="imperial",c(d)):1==n.checked&&(r="metric",c(d))})),t.addEventListener("click",(()=>{let t=e.value.toLowerCase();d=t,c(t)})),c()})();